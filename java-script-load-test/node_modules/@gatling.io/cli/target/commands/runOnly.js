"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const options_1 = require("./options");
const run_1 = require("../run");
exports.default = (program) => {
    program
        .command("run-only")
        .description("Run a Gatling simulation from an already built bundle")
        .addOption(options_1.graalvmHomeMandatoryOption)
        .addOption(options_1.jvmClasspathMandatoryOption)
        .addOption(options_1.simulationMandatoryOption)
        .addOption(options_1.bundleFileOption)
        .addOption(options_1.resourcesFolderOption)
        .addOption(options_1.resultsFolderOption)
        .addOption(options_1.memoryOption)
        .addArgument(options_1.runParametersArgument)
        .action(async (args, options) => {
        const graalvmHome = (0, options_1.graalvmHomeMandatoryOptionValue)(options);
        const jvmClasspath = (0, options_1.jvmClasspathMandatoryOptionValue)(options);
        const simulation = (0, options_1.simulationMandatoryOptionValue)(options);
        const bundleFile = (0, options_1.bundleFileOptionValue)(options);
        const resourcesFolder = (0, options_1.resourcesFolderOptionValue)(options);
        const resultsFolder = (0, options_1.resultsFolderOptionValue)(options);
        const memory = (0, options_1.memoryOptionValue)(options);
        const runParameters = (0, options_1.parseRunParametersArgument)(args);
        await (0, run_1.runSimulation)({
            graalvmHome,
            jvmClasspath,
            simulation: simulation,
            bundleFile,
            resourcesFolder,
            resultsFolder,
            memory,
            runParameters
        });
    });
};
